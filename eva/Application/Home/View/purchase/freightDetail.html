
<script>
$('#checks').click(function(){
	var sum=0;
	if ($(this).attr("checked")) {  
        $("input[name=idfreight]").each(function() {  
            $(this).attr("checked", true);  
           
            var id=$(this).parents('tr').attr('id');
            sum=sum+parseInt($('#'+id).find('td:nth-child(5)').text());
          
        });  
        $("#freightDetail_sum").val(sum);
    } else {  
        $("input[name=idfreight]").each(function() {  
            $(this).attr("checked", false);  
            $("#freightDetail_sum").val(0);
          
        });  
    }  
});
$('#freightDetail_tb input[name=idfreight]').change(function(){
	var sum=0;
	$('#freightDetail_tb input[name=idfreight]').each(function(){
		 if ($(this).attr("checked")) {  
             var id=$(this).val();  
             sum=sum+parseInt($('#'+id).find('td:nth-child(5)').text());
         }  
	});
	
	$("#freightDetail_sum").val(sum);
});

$('#freightDetail_sum').focus(function(){
	$("input[name=idfreight]").each(function() {  
        $(this).attr("checked", false);  
        $("#freightDetail_sum").val('');
    });  
});
</script>
<fieldset>
<form>
<table class="bordered" style="width:100%;font-size:12px" id="freightDetail_tb" >

    <thead> 
    <tr>
        <th>#</th> 
        <th>日期</th>
        <th>入库单号</th> 
        <th>备注</th> 
    	<th>金额</th> 
    	<th>操作</th>
    </tr>
    </thead>
    <tbody>
    <volist name="freight_detail_list" id="vo">
    <tr id={$vo.idfreight}>
    <td>{$i}</td>
    <td>{$vo.time|substr=0,10}<if condition='$vo.inorder eq ""'><if condition='$vo.freight gt 0'>员工付款<else />付款给员工</if></if></td>
    <td>{$vo.inorder}</td>
    <td>{$vo.subject}{$vo.remark}</td>
     <td>{$vo.freight}</td>
    <td><input type="checkbox" name="idfreight" value={$vo.idfreight}></td>
    </tr>
    </volist></tbody>
</table><div style="float:right;">
<input type="hidden" value={$idstaff} id='idstaff'>
<input type="checkbox" id='checks' style="display:inline-block">
<label style="font-size:12px;display:inline-block">&nbsp;全选</label>
</div>
<p></p><div style="display:inline">
<label style="font-size:12px;display:inline-block">付款金额:</label>
<input type="text" id='freightDetail_sum' name="sum" style="display:inline-block;width:30%"/>
</div>
<div>
<label style="font-size:12px;display:inline-block">付款银行:</label>
<select id='idbank' style="display:inline-block;font-size:15px;">
<volist name="banklist" id="vo">
<option value={$vo.idbank}>
{$vo.bname}
</option>
</volist>
</select>
</div>
</form><p></p>
<div class="message info" style="font-size:12px">提示:
<p>1. 逐笔付款删帐时,不能修改付款金额.</p>
</div>
</fieldset>